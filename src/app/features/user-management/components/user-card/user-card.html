<article
  [class]="
    'group h-full overflow-hidden rounded-lg border-2 bg-white shadow-md transition-all hover:scale-[1.02] hover:shadow-xl ' +
    getSourceBorderColor()
  "
>
  <!-- Header con gradiente segÃºn source -->
  <div [class]="'relative h-20 ' + getSourceGradient()">
    <div class="absolute inset-0 bg-gradient-to-br opacity-90"></div>

    <!-- Avatar posicionado sobre el header -->
    <div class="absolute -bottom-8 left-6">
      <div class="relative">
        <img
          [class]="
            'h-20 w-20 rounded-full border-4 border-white object-cover shadow-lg ring-2 ' +
            getSourceRingColor()
          "
          [ngSrc]="user().avatar"
          [alt]="user().name"
          width="80"
          height="80"
        />
        <span
          [class]="
            'absolute -right-1 -bottom-1 flex h-6 w-6 items-center justify-center rounded-full border-2 border-white text-xs shadow-md ' +
            getSourceIconBg()
          "
        >
          {{ getSourceIcon() }}
        </span>
      </div>
    </div>

    <!-- Badge de source en la esquina -->
    <span
      [class]="
        'absolute top-4 right-4 rounded-full px-3 py-1 text-xs font-semibold shadow-sm ' +
        getSourceBadgeColor()
      "
    >
      {{ user().source }}
    </span>
  </div>

  <!-- Contenido de la card -->
  <div class="px-6 pt-10 pb-6">
    <h3 class="mb-1 text-xl font-bold text-gray-900">{{ user().name }}</h3>

    <div class="mb-4 flex items-center gap-2 text-sm text-gray-600">
      <span>âœ‰ï¸</span>
      <a [href]="'mailto:' + user().email" class="hover:text-blue-600 hover:underline">
        {{ user().email }}
      </a>
    </div>

    <!-- Fecha de ingreso -->
    <div [class]="'rounded-lg p-3 ' + getSourceLightBg()">
      @if (user().joinedDate) {
        <p class="flex items-center gap-2 text-sm text-gray-700">
          <span>ğŸ“…</span>
          <span>
            <strong class="font-semibold">IngresÃ³:</strong>
            {{ user().joinedDate | date: 'mediumDate' }}
          </span>
        </p>
      } @else {
        <p class="flex items-center gap-2 text-sm text-gray-500 italic">
          <span>ğŸ“…</span>
          <span>Fecha de ingreso no disponible</span>
        </p>
      }
    </div>
  </div>

  <!-- Footer opcional con indicador de source -->
  <div
    [class]="
      'border-t px-6 py-3 text-center text-xs font-medium transition-colors ' + getSourceFooter()
    "
  >
    Adaptado desde {{ user().source | titlecase }}
  </div>
</article>
